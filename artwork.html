<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Artwork — Daria Avdeeva</title>
  <meta name="description" content="Artwork details page" />
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-neutral-50 text-neutral-900 antialiased">
  <header class="sticky top-0 z-30 bg-white/80 backdrop-blur border-b">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-9 h-9 rounded-full bg-neutral-900 text-white grid place-content-center font-semibold">DA</div>
        <a href="./index.html" class="text-lg font-semibold leading-tight">Daria Avdeeva</a>
      </div>
      <nav class="hidden sm:flex items-center gap-6 text-sm">
        <a href="./gallery.html" class="hover:opacity-70">Works</a>
        <a href="./index.html#about" class="hover:opacity-70">About</a>
        <a href="./index.html#contact" class="hover:opacity-70">Contact</a>
      </nav>
    </div>
  </header>

  <main class="max-w-6xl mx-auto px-4 py-8 grid lg:grid-cols-2 gap-6 items-start">
    <div class="aspect-[4/3] rounded-2xl overflow-hidden shadow bg-neutral-200">
      <img id="img" alt="Artwork image" class="w-full h-full object-contain"/>
    </div>

    <div>
      <a href="./gallery.html" class="text-sm underline">← Back to all works</a>
      <h1 id="title" class="text-3xl font-bold mt-2"></h1>

      <!-- Labeled rows -->
      <dl id="metaRows" class="mt-3 grid grid-cols-1 gap-2 text-sm"></dl>

      <p id="price" class="mt-3 font-medium"></p>
      <p id="desc" class="mt-4 text-neutral-700 whitespace-pre-line"></p>

      <div class="mt-6 grid sm:grid-cols-2 gap-2">
        <a id="inquire" class="px-4 py-2 rounded-2xl bg-neutral-900 text-white text-center" target="_blank">Inquire</a>
        <a id="instagram" class="px-4 py-2 rounded-2xl border text-center" target="_blank">Instagram</a>
      </div>
    </div>
  </main>

  <!-- Load shared data FIRST -->
  <script src="./artworks.js"></script>

  <!-- Page script -->
  <script>
    function getParam(key){
      const url = new URL(window.location.href);
      return url.searchParams.get(key);
    }

    // helper: one labeled row (bold label, regular value)
    function row(label, value){
      if (!value && value !== 0) return "";
      return `
        <div class="grid grid-cols-[140px_1fr] gap-3">
          <dt class="font-semibold text-neutral-900">${label}:</dt>
          <dd class="font-normal text-neutral-700">${value}</dd>
        </div>
      `;
    }

    function renderArtwork(){
      const id = getParam('id');
      const a = (window.ARTWORKS || []).find(x => x.id === id);

      if (!a) {
        document.body.innerHTML = '<div class="max-w-2xl mx-auto p-6 text-center">Artwork not found. <a href="./gallery.html" class="underline">Back to all works</a></div>';
        return;
      }

      document.title = `${a.title} — ${window.ARTIST?.name || 'Artist'}`;

      const imgEl = document.getElementById('img');
      imgEl.src = a.image;
      imgEl.alt = a.title || 'Artwork image';

      document.getElementById('title').textContent = a.title;

      // Labeled meta rows
      const metaHTML = [
        row("Collection", a.collection),
        row("Medium", a.medium),
        row("Size in cm", a.size_cm),
        row("Size", a.size),
        row("Year", a.year),
        row("Location", a.location)
      ].join("");
      document.getElementById('metaRows').innerHTML = metaHTML;

      // Price already formatted like "AED 10,000" in artworks.js
      document.getElementById('price').textContent = a.price || 'AED —';

      // Description supports <strong>/<em> tags
      document.getElementById('desc').innerHTML = a.description || '';

      document.getElementById('inquire').href = `mailto:${window.ARTIST?.email}?subject=${encodeURIComponent('Inquiry: ' + (a.title || ''))}`;
      document.getElementById('instagram').href = `https://instagram.com/${(window.ARTIST?.instagram || '').replace('@','')}`;
    }

    renderArtwork();
  </script>
</body>
</html>
